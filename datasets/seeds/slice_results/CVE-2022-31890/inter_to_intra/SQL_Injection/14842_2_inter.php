<?php
function merged_AuditEntry_getPageNav_getQwhere() {
    // Cross-function argument passing from template:
    // $qwhere = AuditEntry::getQwhere($user);
    // $pageNav = AuditEntry::getPageNav($qwhere);
    $objectId = $user;
    $hide_views = false;
    $type = '';

    // Begin getQwhere implementation
    $qwhere = '';
    $class = 'AuditEntry';
    switch ($class) {
        case 'AuditEntry':
            $qwhere .= ' AND object_type=' . db_input($_REQUEST['type'] ?: 'D');
            if ($hide_views) {
                $qwhere .= ' AND event_id=' . db_input(Event::getIdByName($_REQUEST['state']));
            }
            if ($_REQUEST['state'] && $_REQUEST['state'] != __('All')) {
                $qwhere .= ' AND event_id=' . db_input($event_id);
            }
            if (($startTime && $startTime > time()) or ($startTime > $endTime && $endTime > 0)) {
            } else {
                if ($startTime) {
                    $qwhere .= ' AND timestamp>=FROM_UNIXTIME(' . $startTime . ')';
                }
                if ($endTime) {
                    $qwhere .= ' AND timestamp<=FROM_UNIXTIME(' . $endTime . ')';
                }
            }
            break;
        default:
            // No-op default to keep switch syntactically complete
            break;
    }
    if (!AuditEntry::$show_view_audits) {
        $qwhere .= ' AND event_id !=' . db_input(Event::getIdByName('viewed'));
    }
    // End getQwhere implementation

    // Begin getPageNav implementation
    global $qfrom;
    if (!isset($qfrom)) {
        $qfrom = '';
    }
    $total = db_count("SELECT count(*) $qfrom $qwhere");
    // End getPageNav implementation

    return $total;
}