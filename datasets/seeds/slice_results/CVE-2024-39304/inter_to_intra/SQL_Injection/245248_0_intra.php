<?php
function whyCameEditor()
{
    $iPerson = InputUtils::legacyFilterInput($_GET['PersonID']);
    $sSQL = 'SELECT per_FirstName, per_LastName FROM person_per where per_ID = ' . $iPerson;
    $rsPerson = RunQuery($sSQL);
    extract(mysqli_fetch_array($rsPerson));
    if (isset($_POST['Submit'])) {
        if (strlen($iWhyCameID) < 1) {
            $whyCame
                ->setPerId($iPerson)
                ->setJoin($tJoin)
                ->setCome($tCome)
                ->setSuggest($tSuggest)
                ->setHearOfUs($tHearOfUs);
        } else {
            $whyCame = WhyCameQuery::create()->findOneByPerId($iPerson);
            $whyCame
                ->setJoin($tJoin)
                ->setCome($tCome)
                ->setSuggest($tSuggest)
                ->setHearOfUs($tHearOfUs);
            $whyCame->save();
        }
        if (isset($_POST['Submit'])) {
            if ($linkBack != '') {
            } else {
                RedirectUtils::redirect('WhyCameEditor.php?PersonID=' . $iPerson . '&WhyCameID=' . $iWhyCameID . '&linkBack=', $linkBack);
            }
        }
    } else {
        $sSQL = 'SELECT * FROM whycame_why WHERE why_per_ID = ' . $iPerson;
        $rsWhyCame = RunQuery($sSQL);
    }
}
?>