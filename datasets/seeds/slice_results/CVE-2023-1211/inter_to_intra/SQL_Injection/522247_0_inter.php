<?php
class Admin {
    public function reorder_custom_fields() {
        $table   = $_POST['table'];
        $next    = $_POST['next'];
        $current = $_POST['current'];

        $table = $this->Database->escape($table);

        $old = (array) $Tools->fetch_full_field_definition($table, $current);

        if ($old['Null'] == "NO") {
            $query = 'ALTER TABLE `'.$table.'` MODIFY COLUMN `'.$current.'` '.$old['Type'].' NOT NULL COMMENT "'.$old['Comment'].'" AFTER `'.$next.'`;';
        } else {
            $query = 'ALTER TABLE `'.$table.'` MODIFY COLUMN `'.$current.'` '.$old['Type'].' DEFAULT NULL COMMENT "'.$old['Comment'].'" AFTER `'.$next.'`;';
        }

        try {
            $res = $this->Database->runQuery($query);
        } catch (Exception $e) {
            throw $e;
        }
    }
}
?>